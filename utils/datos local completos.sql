drop table rol_persona cascade;
drop table rol cascade;
drop table prescripciones cascade;
drop table citas cascade;
drop table historias_clinicas cascade;
drop table paciente cascade;
drop table doctor cascade;
drop table comparte cascade;
drop table mantenimiento cascade;
drop table equipamiento cascade;
drop table medicamentos cascade;
drop table tecnico cascade;
drop table empleado cascade;
drop table departamento cascade;
drop table sede cascade;
drop table auditoria_accesos cascade;
drop table persona cascade;

delete from rol_persona;
delete from rol;
delete from prescripciones;
delete from citas;
delete from historias_clinicas;
delete from paciente;
delete from doctor;
delete from comparte;
delete from mantenimiento;
delete from equipamiento;
delete from medicamentos;
delete from tecnico;
delete from empleado;
delete from departamento;
delete from sede;
delete from auditoria_accesos;
delete from persona;


CREATE TABLE rol (
  id_rol INT GENERATED BY DEFAULT AS IDENTITY (START WITH 7) PRIMARY KEY,
  nombre_rol VARCHAR(200) NOT NULL UNIQUE
);

CREATE TABLE "persona" (
  "persona_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 4015) PRIMARY KEY,
  "tipo_documento" VARCHAR(100) NOT NULL,
  "nombres" VARCHAR(100) NOT NULL,
  "apellidos" VARCHAR(100) NOT NULL,
  "fecha_nacimiento" DATE NOT NULL,
  "sexo" CHAR(1) CHECK (sexo IN ('M','F')),
  "direccion" VARCHAR(200),
  "telefono" VARCHAR(20),
  "email" VARCHAR(100) UNIQUE
);

CREATE TABLE "sede" (
  "sede_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 3) PRIMARY KEY ,
  "nombre" VARCHAR(100) NOT NULL,
  "direccion" VARCHAR(200) NOT NULL,
  "telefono" VARCHAR(20),
  "tipo_sede" VARCHAR(50) CHECK (tipo_sede IN ('Hospital', 'Clínica', 'Unidad Móvil'))
);


CREATE TABLE "departamento" (
  "departamento_id" SERIAL NOT NULL,
  "sede_id" INT NOT NULL,
  "nombre" VARCHAR(100) NOT NULL,
  "descripcion" VARCHAR(200),
  PRIMARY KEY ("departamento_id", "sede_id"),
  FOREIGN KEY ("sede_id") REFERENCES "sede" ("sede_id")ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "rol_persona" (
  "id_rol" INT NOT NULL,
  "persona_id" INT NOT NULL,
  PRIMARY KEY ("id_rol", "persona_id"),
  FOREIGN KEY ("id_rol") REFERENCES "rol" ("id_rol")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id")ON DELETE CASCADE ON UPDATE CASCADE
);



CREATE TABLE "auditoria_accesos" (
  "evento_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 15009) PRIMARY KEY,
  "accion" VARCHAR(20),
  "tabla_modificada" VARCHAR(40),
  "ip_origen" VARCHAR(20),
  "fecha_evento" TIMESTAMP NOT NULL DEFAULT now(),
  "persona_id" INT NOT NULL,
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "paciente" (
  "paciente_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 5008) PRIMARY KEY,
  "persona_id" INT NOT NULL,
  "tipo_sangre" VARCHAR(20) NOT NULL,
  "contacto_emergencia" VARCHAR(25) NOT NULL,
  "riesgo_clinico" VARCHAR(20) CHECK (riesgo_clinico IN ('Bajo','Medio', 'Alto')),
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "empleado" (
  "empleado_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 6010) PRIMARY KEY ,
  "persona_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "fecha_contratacion" DATE NOT NULL,
  "salario" NUMERIC(10,2),
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id") ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("departamento_id", "sede_id") REFERENCES "departamento" ("departamento_id", "sede_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "doctor" (
  "doctor_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 7004) PRIMARY KEY,
  "empleado_id" INT NOT NULL,
  "especialidad" VARCHAR(100) NOT NULL,
  FOREIGN KEY ("empleado_id") REFERENCES "empleado" ("empleado_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "tecnico" (
  "tecnico_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 8004) PRIMARY KEY,
  "empleado_id" INT NOT NULL,
  "area" VARCHAR(100),
  FOREIGN KEY ("empleado_id") REFERENCES "empleado" ("empleado_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "equipamiento" (
  "equipamiento_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 9013) PRIMARY KEY,
  "nombre" VARCHAR(100) NOT NULL,
  "categoria" VARCHAR(50) NOT NULL,
  "estado" VARCHAR(50) CHECK (estado IN ('Activo', 'Mantenimiento', 'Fuera de Servicio'))
);


CREATE TABLE "comparte" (
  "equipamiento_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "sede_id"         INT NOT NULL,
  PRIMARY KEY ("equipamiento_id","departamento_id","sede_id"),
  FOREIGN KEY ("equipamiento_id") REFERENCES "equipamiento" ("equipamiento_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("departamento_id","sede_id") REFERENCES "departamento" ("departamento_id","sede_id")ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "mantenimiento" (
	"equipamiento_id" INT NOT NULL,
  "fecha_mantenimiento" DATE,
  "tipo_mantenimiento" VARCHAR(100) NOT NULL,
  "tecnico_id" INT NOT NULL,
  PRIMARY KEY ("fecha_mantenimiento", "tecnico_id", "equipamiento_id"),
  FOREIGN KEY ("equipamiento_id") REFERENCES "equipamiento" ("equipamiento_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("tecnico_id") REFERENCES "tecnico" ("tecnico_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "historias_clinicas" (
  "historia_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 10010) PRIMARY KEY,
  "fecha_registro" TIMESTAMP NOT NULL DEFAULT (NOW()),
  "diagnostico" VARCHAR(300) NOT NULL,
  "tratamiento" VARCHAR(300),
  "paciente_id" INT NOT NULL,
  FOREIGN KEY ("paciente_id") REFERENCES "paciente" ("paciente_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "medicamentos" (
  "medicamento_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 13025) PRIMARY KEY,
  "departamento_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "nombre" VARCHAR(100) NOT NULL,
  "descripcion" VARCHAR(200) NOT NULL,
  "stock" INT NOT NULL,
  "proveedor" VARCHAR(30) NOT NULL,
  FOREIGN KEY ("departamento_id", "sede_id") REFERENCES "departamento" ("departamento_id", "sede_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "citas" (
  "cita_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 12007),
  "paciente_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "doctor_id" INT NOT NULL,
  "fecha_hora" TIMESTAMP NOT NULL,
  "estado" VARCHAR(20) CHECK (estado IN ('Programada','Completada')),
  "tipo_servicio" VARCHAR(50) NOT NULL,
  PRIMARY KEY ("cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id"),
  FOREIGN KEY ("doctor_id") REFERENCES "doctor" ("doctor_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("paciente_id") REFERENCES "paciente" ("paciente_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("departamento_id", "sede_id") REFERENCES "departamento" ("departamento_id", "sede_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "prescripciones" (
  "prescripcion_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 14016),
  "medicamento_id" INT NOT NULL,
  "historia_id" INT NOT NULL,
  "cita_id" INT NOT NULL,
  "paciente_id" INT NOT NULL,
  "doctor_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "dosis" VARCHAR(20) NOT NULL,
  "frecuencia" VARCHAR(20) NOT NULL,
  "duracion" VARCHAR(20) NOT NULL,
  "fecha_emision" DATE NOT NULL,
  PRIMARY KEY ("prescripcion_id", "cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id", "medicamento_id"),
  FOREIGN KEY ("cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id") REFERENCES "citas" ("cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id") ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("historia_id") REFERENCES "historias_clinicas" ("historia_id") ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("medicamento_id") REFERENCES "medicamentos" ("medicamento_id") ON DELETE CASCADE ON UPDATE CASCADE
);

-- ============================================
-- SCRIPT DE INSERCIÓN DE DATOS - HOSPITAL ESPERANZA
-- TODAS LAS FECHAS EN 2025
-- ============================================

-- 1. ROLES (Mismos roles)
INSERT INTO rol (id_rol, nombre_rol) VALUES
(1, 'doctor'),
(2, 'paciente'),
(3, 'administrador_sistema'),
(4, 'administrador_datos'),
(5, 'tecnico'),
(6, 'secretaria');

-- 2. SEDES (2 nuevas sedes)
INSERT INTO sede (sede_id, nombre, direccion, telefono, tipo_sede) VALUES
(1, 'Hospital Esperanza Sur', 'Av. La Esperanza #789, Pereira', '6066789012', 'Hospital'),
(2, 'Hospital Esperanza Norte', 'Carrera 8 #45-67, Pereira', '6066783456', 'Hospital');

-- 3. DEPARTAMENTOS (Misma estructura que ajustaste)
INSERT INTO departamento (departamento_id, sede_id, nombre, descripcion) VALUES
(1, 1, 'Cardiología', 'Departamento especializado en enfermedades cardiovasculares'),
(2, 1, 'Traumatología', 'Atención de lesiones y enfermedades del sistema músculo-esquelético'),
(3, 1, 'Medicina General', 'Consulta y atención médica general'),
(1, 2, 'Cardiología', 'Departamento especializado en enfermedades cardiovasculares'),
(4, 2, 'Administrativo', 'Departamento gestión del hospital'),
(5, 2, 'Pediatría', 'Atención médica especializada para niños y adolescentes'),
(3, 2, 'Medicina General', 'Consulta y atención médica general');

-- 4. PERSONAS (14 personas nuevas)
INSERT INTO persona (persona_id, tipo_documento, nombres, apellidos, fecha_nacimiento, sexo, direccion, telefono, email) VALUES
-- Doctores (3)
(4001, 'CC', 'Alejandro José', 'Méndez Ríos', '1977-03-25', 'M', 'Calle 45 #12-30', '3109876543', 'alejandro.mendez@esperanza.com'),
(4002, 'CC', 'Claudia Marcela', 'Santamaría López', '1983-06-14', 'F', 'Carrera 22 #78-90', '3101234567', 'claudia.santamaria@esperanza.com'),
(4003, 'CC', 'Roberto Carlos', 'Navarro Díaz', '1985-10-08', 'M', 'Av. Circunvalar #33-45', '3158765432', 'roberto.navarro@esperanza.com'),

-- Técnicos (3)
(4004, 'CC', 'Luisa Fernanda', 'Cárdenas Mora', '1993-04-18', 'F', 'Calle 78 #23-10', '3186543210', 'luisa.cardenas@esperanza.com'),
(4005, 'CC', 'David Esteban', 'Gutiérrez Peña', '1991-08-30', 'M', 'Carrera 15 #45-22', '3147890123', 'david.gutierrez@esperanza.com'),
(4006, 'CC', 'Adriana Patricia', 'Reyes Castro', '1994-01-22', 'F', 'Av. 30 de Agosto #12-34', '3194567890', 'adriana.reyes@esperanza.com'),

-- Pacientes solo-pacientes (5)
(4007, 'CC', 'Fernando Javier', 'Ortiz Valencia', '1972-11-15', 'M', 'Calle 60 #18-25', '3202345678', 'fernando.ortiz@email.com'),
(4008, 'CC', 'María del Pilar', 'Quintero Gil', '1978-09-28', 'F', 'Carrera 10 #33-15', '3113456789', 'maria.quintero@email.com'),
(4009, 'CC', 'Alfonso Ramón', 'Velásquez Paredes', '1967-12-03', 'M', 'Av. Las Flores #45-60', '3124567890', 'alfonso.velasquez@email.com'),
(4010, 'CC', 'Sara Isabel', 'Mejía Restrepo', '1996-07-19', 'F', 'Calle 25 #40-12', '3135678901', 'sara.mejia@email.com'),
(4011, 'CC', 'Julián Andrés', 'Franco Mendoza', '1973-04-12', 'M', 'Carrera 50 #22-18', '3146789012', 'julian.franco@email.com'),

-- Administrador Sistema (1)
(4012, 'CC', 'Camilo Andrés', 'Ospina Ramírez', '1987-05-30', 'M', 'Av. Los Comuneros #55-20', '3157890123', 'camilo.ospina@esperanza.com'),

-- Administrador Datos (1)
(4013, 'CC', 'Daniela Alejandra', 'Vargas Soto', '1992-02-14', 'F', 'Calle 90 #15-40', '3168901234', 'daniela.vargas@esperanza.com'),

-- Secretaria (1)
(4014, 'CC', 'Gabriela María', 'Morales Londoño', '1995-11-08', 'F', 'Carrera 35 #60-25', '3179012345', 'gabriela.morales@esperanza.com');

-- 5. ROL_PERSONA (Asignación de roles)
INSERT INTO rol_persona (id_rol, persona_id) VALUES
-- Doctores
(1, 4001),
(1, 4002),
(1, 4003),

-- Técnicos
(5, 4004),
(5, 4005),
(5, 4006),

-- Pacientes (7 totales, incluyendo 2 empleados como pacientes)
(2, 4003), -- Roberto (Doctor y Paciente)
(2, 4006), -- Adriana (Técnico y Paciente)
(2, 4007),
(2, 4008),
(2, 4009),
(2, 4010),
(2, 4011),

-- Otros roles
(3, 4012),
(4, 4013),
(6, 4014);

-- 6. PACIENTES (7 pacientes)
INSERT INTO paciente (paciente_id, persona_id, tipo_sangre, contacto_emergencia, riesgo_clinico) VALUES
(5001, 4003, 'AB+', '3021234567', 'Bajo'),
(5002, 4006, 'A+', '3022345678', 'Bajo'),
(5003, 4007, 'O+', '3023456789', 'Alto'),
(5004, 4008, 'B+', '3024567890', 'Medio'),
(5005, 4009, 'A-', '3025678901', 'Alto'),
(5006, 4010, 'O-', '3026789012', 'Bajo'),
(5007, 4011, 'AB-', '3027890123', 'Medio');

-- 7. EMPLEADOS (9 empleados)
INSERT INTO empleado (empleado_id, persona_id, departamento_id, sede_id, fecha_contratacion, salario) VALUES
-- Doctores
(6001, 4001, 1, 1, '2016-02-20', 15800000.00), -- Cardiología Sede 1
(6002, 4002, 2, 1, '2017-07-15', 15200000.00), -- Traumatología Sede 1
(6003, 4003, 5, 2, '2019-04-10', 14200000.00), -- Pediatría Sede 2

-- Técnicos
(6004, 4004, 1, 1, '2020-01-25', 4800000.00),  -- Cardiología Sede 1
(6005, 4005, 3, 1, '2021-09-08', 4450000.00),  -- Medicina General Sede 1
(6006, 4006, 1, 2, '2022-05-12', 4600000.00),  -- Cardiología Sede 2

-- Otros roles
(6007, 4012, 4, 2, '2015-03-18', 8300000.00),  -- Admin Sistema
(6008, 4013, 4, 2, '2018-11-22', 7900000.00),  -- Admin Datos
(6009, 4014, 4, 2, '2021-02-14', 3750000.00);  -- Secretaria

-- 8. DOCTORES (3 doctores)
INSERT INTO doctor (doctor_id, empleado_id, especialidad) VALUES
(7001, 6001, 'Cardiología'),
(7002, 6002, 'Traumatología'),
(7003, 6003, 'Pediatría');

-- 9. TÉCNICOS (3 técnicos)
INSERT INTO tecnico (tecnico_id, empleado_id, area) VALUES
(8001, 6004, 'Laboratorio Cardiológico Avanzado'),
(8002, 6005, 'Diagnóstico por Imágenes'),
(8003, 6006, 'Mantenimiento de Equipos de Monitoreo');

-- 10. EQUIPAMIENTO (12 equipos nuevos)
INSERT INTO equipamiento (equipamiento_id, nombre, categoria, estado) VALUES
-- Cardiología Sede 1 (Dept 1)
(9001, 'Electrocardiógrafo Portátil Digital', 'Diagnóstico', 'Activo'),
(9002, 'Monitor de Presión Arterial 24h', 'Monitoreo', 'Activo'),

-- Traumatología Sede 1 (Dept 2)
(9003, 'Resonador Magnético 1.5T', 'Imagenología', 'Activo'),
(9004, 'Arco en C para Cirugía Ortopédica', 'Quirúrgico', 'Activo'),

-- Medicina General Sede 1 (Dept 3)
(9005, 'Analizador de Gases Sanguíneos', 'Diagnóstico', 'Activo'),
(9006, 'Desfibrilador Semiautomático', 'Emergencia', 'Activo'),

-- Cardiología Sede 2 (Dept 1)
(9007, 'Ecocardiógrafo Portátil', 'Diagnóstico', 'Activo'),
(9008, 'Holter de Arritmias', 'Monitoreo', 'Activo'),

-- Pediatría Sede 2 (Dept 5)
(9009, 'Incubadora de Transporte', 'Cuidado Intensivo', 'Activo'),
(9010, 'Monitor Multiparamétrico Neonatal', 'Terapia', 'Activo'),

-- Medicina General Sede 2 (Dept 3)
(9011, 'Espirómetro Digital', 'Diagnóstico', 'Activo'),
(9012, 'Nebulizador Ultrasónico', 'Tratamiento', 'Activo');

-- 11. COMPARTE (Equipos compartidos - misma lógica)
INSERT INTO comparte (equipamiento_id, departamento_id, sede_id) VALUES
-- Sede 1
(9001, 1, 1), (9002, 1, 1),
(9003, 2, 1), (9004, 2, 1),
(9005, 3, 1), (9006, 3, 1),

-- Sede 2
(9007, 1, 2), (9008, 1, 2),
(9009, 5, 2), (9010, 5, 2),
(9011, 3, 2), (9012, 3, 2),

-- Equipos compartidos entre sedes (2 equipos compartidos)
-- Monitor de Presión Arterial compartido entre Cardiología de ambas sedes
(9002, 1, 2),

-- Resonador Magnético compartido con Medicina General Sede 1
(9003, 3, 1);

-- 12. MANTENIMIENTO (Registros de mantenimiento en 2025 - usando todos los técnicos)
INSERT INTO mantenimiento (equipamiento_id, fecha_mantenimiento, tipo_mantenimiento, tecnico_id) VALUES
(9001, '2025-10-05', 'Preventivo', 8001),
(9002, '2025-09-18', 'Calibración', 8001),
(9003, '2025-11-22', 'Correctivo', 8002),
(9004, '2025-10-25', 'Preventivo', 8003),
(9007, '2025-11-30', 'Preventivo', 8003),
(9008, '2025-09-20', 'Revisión de emergencia', 8003);


INSERT INTO citas (cita_id, paciente_id, departamento_id, sede_id, doctor_id, fecha_hora, estado, tipo_servicio) VALUES
-- DOCTOR 7001 (Cardiología) - 5 CITAS COMPLETADAS
(12023, 5003, 1, 1, 7001, '2025-12-02 09:00:00', 'Completada', 'Consulta Cardiológica Urgente'),      -- cita_id 12023
(12024, 5005, 1, 1, 7001, '2025-12-03 10:00:00', 'Completada', 'Control de Arritmia'),                 -- cita_id 12024
(12025, 5002, 1, 2, 7001, '2025-12-04 14:00:00', 'Completada', 'Consulta Cardiológica'),               -- cita_id 12025
(12026, 5003, 1, 1, 7001, '2025-12-06 08:30:00', 'Completada', 'Seguimiento Post-Infarto'),            -- cita_id 12026
(12027, 5003, 1, 1, 7001, '2025-12-12 08:00:00', 'Completada', 'Control Cardiológico'),                -- cita_id 12027

-- DOCTOR 7003 (Pediatría) - 3 CITAS COMPLETADAS
(12028, 5006, 5, 2, 7003, '2025-12-09 15:00:00', 'Completada', 'Consulta Pediátrica Urgente'),         -- cita_id 12028
(12029, 5001, 5, 2, 7003, '2025-12-11 13:30:00', 'Completada', 'Control Pediátrico'),                  -- cita_id 12029
(12030, 5006, 5, 2, 7003, '2025-12-12 10:00:00', 'Completada', 'Seguimiento Respiratorio'),            -- cita_id 12030

-- DOCTOR 7002 (Traumatología) - 2 CITAS COMPLETADAS
(12031, 5004, 2, 1, 7002, '2025-12-05 10:30:00', 'Completada', 'Control Post-Fractura'),               -- cita_id 12031
(12032, 5007, 2, 1, 7002, '2025-12-10 08:45:00', 'Completada', 'Consulta Traumatológica');             -- cita_id 12032

-- ============================================
-- HISTORIAS CLÍNICAS CORRESPONDIENTES
-- Fecha registro = fecha_cita + 30-45 minutos
-- ============================================

INSERT INTO historias_clinicas (historia_id, fecha_registro, diagnostico, tratamiento, paciente_id) VALUES
-- Para cita 12023 (2-dic, 09:00) - Paciente 5003
(10020,'2025-12-02 09:40:00', 'Insuficiencia cardíaca congestiva controlada', 'Terapia diurética y control de ingesta de sodio', 5003),  -- historia_id 10020

-- Para cita 12024 (3-dic, 10:00) - Paciente 5005
(10021, '2025-12-03 10:35:00', 'Arritmia ventricular leve', 'Ajuste de betabloqueadores', 5005),  -- historia_id 10021

-- Para cita 12025 (4-dic, 14:00) - Paciente 5002
(10022,'2025-12-04 14:45:00', 'Hipercolesterolemia familiar', 'Estatinas de alta potencia', 5002),  -- historia_id 10022

-- Para cita 12031 (5-dic, 10:30) - Paciente 5004
(10023, '2025-12-05 11:10:00', 'Fractura de muñeca en consolidación', 'Fisioterapia y analgesia', 5004),  -- historia_id 10023

-- Para cita 12026 (6-dic, 08:30) - Paciente 5003
(10024, '2025-12-06 09:15:00', 'Síndrome coronario agudo estable', 'Antiagregación dual y estatinas', 5003),  -- historia_id 10024

-- Para cita 12028 (9-dic, 15:00) - Paciente 5006
(10025, '2025-12-09 15:40:00', 'Bronquiolitis viral', 'Nebulizaciones y broncodilatadores', 5006),  -- historia_id 10025

-- Para cita 12032 (10-dic, 08:45) - Paciente 5007
(10026, '2025-12-10 09:30:00', 'Tendinitis del manguito rotador', 'Antiinflamatorios y reposo relativo', 5007),  -- historia_id 10026

-- Para cita 12029 (11-dic, 13:30) - Paciente 5001
(10027, '2025-12-11 14:10:00', 'Infección respiratoria alta', 'Antibioticoterapia preventiva', 5001),  -- historia_id 10027

-- Para cita 12027 (12-dic, 08:00) - Paciente 5003
(10028, '2025-12-12 08:45:00', 'Control cardiológico post-infarto', 'Mantenimiento de terapia actual', 5003),  -- historia_id 10028

-- Para cita 12030 (12-dic, 10:00) - Paciente 5006
(10029, '2025-12-12 10:40:00', 'Asma bronquial en control', 'Corticoides inhalados y broncodilatadores', 5006);  -- historia_id 10029



-- 16. MEDICAMENTOS (Por departamento)
INSERT INTO medicamentos (medicamento_id, departamento_id, sede_id, nombre, descripcion, stock, proveedor) VALUES
-- Cardiología Sede 1 (Dept 1)
(13001, 1, 1, 'Rosuvastatina 20mg', 'Estatina para reducción de colesterol', 480, 'FarmaSalud'),
(13002, 1, 1, 'Valsartán 160mg', 'Antihipertensivo ARA II', 520, 'MediColombia'),
(13003, 1, 1, 'Ticagrelor 90mg', 'Antiagregante plaquetario', 580, 'BioCare'),
(13004, 1, 1, 'Nebivolol 5mg', 'Betabloqueador vasodilatador', 340, 'FarmaSalud'),

-- Traumatología Sede 1 (Dept 2)
(13005, 2, 1, 'Dexketoprofeno 25mg', 'Antiinflamatorio no esteroideo', 520, 'MediColombia'),
(13006, 2, 1, 'Metamizol 500mg', 'Analgésico y antipirético', 750, 'BioCare'),
(13007, 2, 1, 'Diclofenaco 100mg', 'Antiinflamatorio de acción prolongada', 280, 'FarmaSalud'),
(13008, 2, 1, 'Tapentadol 50mg', 'Analgésico opioide', 180, 'MediColombia'),

-- Medicina General Sede 1 (Dept 3)
(13009, 3, 1, 'Cefuroxima 500mg', 'Antibiótico cefalosporina', 420, 'BioCare'),
(13010, 3, 1, 'Lansoprazol 30mg', 'Inhibidor de bomba de protones', 620, 'FarmaSalud'),
(13011, 3, 1, 'Glimepirida 4mg', 'Hipoglucemiante oral', 530, 'MediColombia'),
(13012, 3, 1, 'Pravastatina 40mg', 'Estatina para dislipidemia', 460, 'BioCare'),

-- Cardiología Sede 2 (Dept 1)
(13013, 1, 2, 'Rosuvastatina 20mg', 'Estatina para reducción de colesterol', 400, 'FarmaSalud'),
(13014, 1, 2, 'Bisoprolol 2.5mg', 'Betabloqueador cardio-selectivo', 360, 'MediColombia'),
(13015, 1, 2, 'Ácido Acetilsalicílico 100mg', 'Antiagregante plaquetario', 680, 'BioCare'),
(13016, 1, 2, 'Hidroclorotiazida 25mg', 'Diurético tiazídico', 300, 'FarmaSalud'),

-- Pediatría Sede 2 (Dept 5)
(13017, 5, 2, 'Amoxicilina Suspensión 400mg/5ml', 'Antibiótico pediátrico', 280, 'MediColombia'),
(13018, 5, 2, 'Ibuprofeno Suspensión 200mg/5ml', 'Antipirético y antiinflamatorio', 380, 'BioCare'),
(13019, 5, 2, 'Budesonida Inhalador 200mcg', 'Corticosteroide inhalado', 220, 'FarmaSalud'),
(13020, 5, 2, 'Desloratadina Jarabe 2.5mg/5ml', 'Antihistamínico de segunda generación', 320, 'MediColombia'),

-- Medicina General Sede 2 (Dept 3)
(13021, 3, 2, 'Claritromicina 500mg', 'Antibiótico macrólido', 330, 'BioCare'),
(13022, 3, 2, 'Famotidina 40mg', 'Antagonista H2', 420, 'FarmaSalud'),
(13023, 3, 2, 'Ramipril 5mg', 'Antihipertensivo IECA', 380, 'MediColombia'),
(13024, 3, 2, 'Repaglinida 2mg', 'Hipoglucemiante oral rápido', 260, 'BioCare');

-- ============================================
-- PRESCRIPCIONES CORRESPONDIENTES
-- 2-3 medicamentos por cita según complejidad
-- ============================================

-- PRESCRIPCIONES PARA CITA 12023 (2-dic) - Historia 10020 - Doctor 7001 - Paciente 5003
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13002, 10020, 12023, 5003, 7001, 1, 1, '160mg', 'Cada 12 horas', '30 días', '2025-12-02'),
(13004, 10020, 12023, 5003, 7001, 1, 1, '5mg', 'Cada 24 horas', '30 días', '2025-12-02');

-- PRESCRIPCIONES PARA CITA 12024 (3-dic) - Historia 10021 - Doctor 7001 - Paciente 5005
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13014, 10021, 12024, 5005, 7001, 1, 1, '2.5mg', 'Cada 12 horas', '60 días', '2025-12-03'),
(13015, 10021, 12024, 5005, 7001, 1, 1, '100mg', 'Cada 24 horas', '60 días', '2025-12-03');

-- PRESCRIPCIONES PARA CITA 12025 (4-dic) - Historia 10022 - Doctor 7001 - Paciente 5002
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13001, 10022, 12025, 5002, 7001, 2, 1, '20mg', 'Cada 24 horas', '90 días', '2025-12-04'),
(13016, 10022, 12025, 5002, 7001, 2, 1, '25mg', 'Cada 24 horas', '90 días', '2025-12-04');

-- PRESCRIPCIONES PARA CITA 12031 (5-dic) - Historia 10023 - Doctor 7002 - Paciente 5004
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13005, 10023, 12031, 5004, 7002, 1, 2, '25mg', 'Cada 8 horas', '14 días', '2025-12-05'),
(13006, 10023, 12031, 5004, 7002, 1, 2, '500mg', 'Cada 6 horas', '10 días', '2025-12-05');

-- PRESCRIPCIONES PARA CITA 12026 (6-dic) - Historia 10024 - Doctor 7001 - Paciente 5003
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13001, 10024, 12026, 5003, 7001, 1, 1, '20mg', 'Cada 24 horas', '30 días', '2025-12-06'),
(13003, 10024, 12026, 5003, 7001, 1, 1, '90mg', 'Cada 12 horas', '365 días', '2025-12-06'),
(13015, 10024, 12026, 5003, 7001, 1, 1, '100mg', 'Cada 24 horas', '365 días', '2025-12-06');

-- PRESCRIPCIONES PARA CITA 12028 (9-dic) - Historia 10025 - Doctor 7003 - Paciente 5006
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13017, 10025, 12028, 5006, 7003, 2, 5, '10ml', 'Cada 8 horas', '10 días', '2025-12-09'),
(13019, 10025, 12028, 5006, 7003, 2, 5, '2 inhalaciones', 'Cada 12 horas', '14 días', '2025-12-09');

-- PRESCRIPCIONES PARA CITA 12032 (10-dic) - Historia 10026 - Doctor 7002 - Paciente 5007
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13007, 10026, 12032, 5007, 7002, 1, 2, '100mg', 'Cada 12 horas', '7 días', '2025-12-10'),
(13006, 10026, 12032, 5007, 7002, 1, 2, '500mg', 'Cada 8 horas', '5 días', '2025-12-10');

-- PRESCRIPCIONES PARA CITA 12029 (11-dic) - Historia 10027 - Doctor 7003 - Paciente 5001
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13017, 10027, 12029, 5001, 7003, 2, 5, '8ml', 'Cada 8 horas', '7 días', '2025-12-11'),
(13018, 10027, 12029, 5001, 7003, 2, 5, '5ml', 'Cada 6 horas', '5 días', '2025-12-11');

-- PRESCRIPCIONES PARA CITA 12027 (12-dic, 08:00) - Historia 10028 - Doctor 7001 - Paciente 5003
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13001, 10028, 12027, 5003, 7001, 1, 1, '20mg', 'Cada 24 horas', '30 días', '2025-12-12'),
(13002, 10028, 12027, 5003, 7001, 1, 1, '160mg', 'Cada 12 horas', '30 días', '2025-12-12');

-- PRESCRIPCIONES PARA CITA 12030 (12-dic, 10:00) - Historia 10029 - Doctor 7003 - Paciente 5006
INSERT INTO prescripciones (medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
(13019, 10029, 12030, 5006, 7003, 2, 5, '2 inhalaciones', 'Cada 12 horas', '30 días', '2025-12-12'),
(13020, 10029, 12030, 5006, 7003, 2, 5, '5ml', 'Cada 24 horas', '30 días', '2025-12-12');

-- 18. AUDITORÍA DE ACCESOS
INSERT INTO auditoria_accesos (evento_id, accion, tabla_modificada, ip_origen, fecha_evento, persona_id) VALUES
(15001, 'INSERT', 'citas', '192.168.3.100', '2025-08-20 10:15:00', 4014),
(15002, 'UPDATE', 'paciente', '192.168.3.105', '2025-09-25 14:45:00', 4012),
(15003, 'SELECT', 'historias_clinicas', '192.168.3.102', '2025-10-28 10:30:00', 4001),
(15004, 'INSERT', 'prescripciones', '192.168.3.103', '2025-11-25 11:20:00', 4002),
(15005, 'UPDATE', 'medicamentos', '192.168.3.100', '2025-12-02 14:10:00', 4013),
(15006, 'SELECT', 'citas', '192.168.3.104', '2025-12-05 15:00:00', 4003),
(15007, 'INSERT', 'citas', '192.168.3.110', '2025-12-08 14:35:00', 4014),
(15008, 'INSERT', 'prescripciones', '192.168.3.110', '2025-12-08 14:40:00', 4003);

-- ============================================
-- FIN DEL SCRIPT
-- ============================================


