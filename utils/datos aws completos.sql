delete from rol_persona;
delete from rol;
delete from prescripciones;
delete from citas;
delete from historias_clinicas;
delete from paciente;
delete from doctor;
delete from comparte;
delete from mantenimiento;
delete from equipamiento;
delete from medicamentos;
delete from tecnico;
delete from empleado;
delete from departamento;
delete from sede;
delete from auditoria_accesos;
delete from persona;



drop table rol_persona cascade;
drop table rol cascade;
drop table prescripciones cascade;
drop table citas cascade;
drop table historias_clinicas cascade;
drop table paciente cascade;
drop table doctor cascade;
drop table comparte cascade;
drop table mantenimiento cascade;
drop table equipamiento cascade;
drop table medicamentos cascade;
drop table tecnico cascade;
drop table empleado cascade;
drop table departamento cascade;
drop table sede cascade;
drop table auditoria_accesos cascade;
drop table persona cascade;


select * from rol


CREATE TABLE rol (
  id_rol INT GENERATED BY DEFAULT AS IDENTITY (START WITH 7) PRIMARY KEY,
  nombre_rol VARCHAR(200) NOT NULL UNIQUE
);

CREATE TABLE "persona" (
  "persona_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 3015) PRIMARY KEY,
  "tipo_documento" VARCHAR(100) NOT NULL,
  "nombres" VARCHAR(100) NOT NULL,
  "apellidos" VARCHAR(100) NOT NULL,
  "fecha_nacimiento" DATE NOT NULL,
  "sexo" CHAR(1) CHECK (sexo IN ('M','F')),
  "direccion" VARCHAR(200),
  "telefono" VARCHAR(20),
  "email" VARCHAR(100) UNIQUE
);


CREATE TABLE "sede" (
  "sede_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 3) PRIMARY KEY ,
  "nombre" VARCHAR(100) NOT NULL,
  "direccion" VARCHAR(200) NOT NULL,
  "telefono" VARCHAR(20),
  "tipo_sede" VARCHAR(50) CHECK (tipo_sede IN ('Hospital', 'Clínica', 'Unidad Móvil'))
);

CREATE TABLE "departamento" (
  "departamento_id" SERIAL NOT NULL,
  "sede_id" INT NOT NULL,
  "nombre" VARCHAR(100) NOT NULL,
  "descripcion" VARCHAR(200),
  PRIMARY KEY ("departamento_id", "sede_id"),
  FOREIGN KEY ("sede_id") REFERENCES "sede" ("sede_id")ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "rol_persona" (
  "id_rol" INT NOT NULL,
  "persona_id" INT NOT NULL,
  PRIMARY KEY ("id_rol", "persona_id"),
  FOREIGN KEY ("id_rol") REFERENCES "rol" ("id_rol")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id")ON DELETE CASCADE ON UPDATE CASCADE
);



CREATE TABLE "auditoria_accesos" (
  "evento_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 13009) PRIMARY KEY,
  "accion" VARCHAR(20),
  "tabla_modificada" VARCHAR(40),
  "ip_origen" VARCHAR(20),
  "fecha_evento" TIMESTAMP NOT NULL DEFAULT now(),
  "persona_id" INT NOT NULL,
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id") ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "paciente" (
  "paciente_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 4008) PRIMARY KEY,
  "persona_id" INT NOT NULL,
  "tipo_sangre" VARCHAR(20) NOT NULL,
  "contacto_emergencia" VARCHAR(25) NOT NULL,
  "riesgo_clinico" VARCHAR(20) CHECK (riesgo_clinico IN ('Bajo','Medio', 'Alto')),
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id") ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "empleado" (
  "empleado_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 5010) PRIMARY KEY ,
  "persona_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "fecha_contratacion" DATE NOT NULL,
  "salario" NUMERIC(10,2),
  FOREIGN KEY ("persona_id") REFERENCES "persona" ("persona_id") ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("departamento_id", "sede_id") REFERENCES "departamento" ("departamento_id", "sede_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "doctor" (
  "doctor_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 6004) PRIMARY KEY,
  "empleado_id" INT NOT NULL,
  "especialidad" VARCHAR(100) NOT NULL,
  FOREIGN KEY ("empleado_id") REFERENCES "empleado" ("empleado_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "tecnico" (
  "tecnico_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 7004) PRIMARY KEY,
  "empleado_id" INT NOT NULL,
  "area" VARCHAR(100),
  FOREIGN KEY ("empleado_id") REFERENCES "empleado" ("empleado_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "equipamiento" (
  "equipamiento_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 8013) PRIMARY KEY,
  "nombre" VARCHAR(100) NOT NULL,
  "categoria" VARCHAR(50) NOT NULL,
  "estado" VARCHAR(50) CHECK (estado IN ('Activo', 'Mantenimiento', 'Fuera de Servicio'))
);

CREATE TABLE "comparte" (
  "equipamiento_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "sede_id"         INT NOT NULL,
  PRIMARY KEY ("equipamiento_id","departamento_id","sede_id"),
  FOREIGN KEY ("equipamiento_id") REFERENCES "equipamiento" ("equipamiento_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("departamento_id","sede_id") REFERENCES "departamento" ("departamento_id","sede_id")ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "mantenimiento" (
	"equipamiento_id" INT NOT NULL,
  "fecha_mantenimiento" DATE,
  "tipo_mantenimiento" VARCHAR(100) NOT NULL,
  "tecnico_id" INT NOT NULL,
  PRIMARY KEY ("fecha_mantenimiento", "tecnico_id", "equipamiento_id"),
  FOREIGN KEY ("equipamiento_id") REFERENCES "equipamiento" ("equipamiento_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("tecnico_id") REFERENCES "tecnico" ("tecnico_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "historias_clinicas" (
  "historia_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 9011) PRIMARY KEY,
  "fecha_registro" TIMESTAMP NOT NULL DEFAULT (NOW()),
  "diagnostico" VARCHAR(300) NOT NULL,
  "tratamiento" VARCHAR(300),
  "paciente_id" INT NOT NULL,
  FOREIGN KEY ("paciente_id") REFERENCES "paciente" ("paciente_id") ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "medicamentos" (
  "medicamento_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 11025) PRIMARY KEY,
  "departamento_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "nombre" VARCHAR(100) NOT NULL,
  "descripcion" VARCHAR(200) NOT NULL,
  "stock" INT NOT NULL,
  "proveedor" VARCHAR(30) NOT NULL,
  FOREIGN KEY ("departamento_id", "sede_id") REFERENCES "departamento" ("departamento_id", "sede_id") ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "citas" (
  "cita_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 20007),
  "paciente_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "doctor_id" INT NOT NULL,
  "fecha_hora" TIMESTAMP NOT NULL,
  "estado" VARCHAR(20) CHECK (estado IN ('Programada','Completada')),
  "tipo_servicio" VARCHAR(50) NOT NULL,
  PRIMARY KEY ("cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id"),
  FOREIGN KEY ("doctor_id") REFERENCES "doctor" ("doctor_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("paciente_id") REFERENCES "paciente" ("paciente_id")ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("departamento_id", "sede_id") REFERENCES "departamento" ("departamento_id", "sede_id")ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE "prescripciones" (
  "prescripcion_id" INT GENERATED BY DEFAULT AS IDENTITY (START WITH 12016),
  "medicamento_id" INT NOT NULL,
  "historia_id" INT NOT NULL,
  "cita_id" INT NOT NULL,
  "paciente_id" INT NOT NULL,
  "doctor_id" INT NOT NULL,
  "sede_id" INT NOT NULL,
  "departamento_id" INT NOT NULL,
  "dosis" VARCHAR(20) NOT NULL,
  "frecuencia" VARCHAR(20) NOT NULL,
  "duracion" VARCHAR(20) NOT NULL,
  "fecha_emision" DATE NOT NULL,
  PRIMARY KEY ("prescripcion_id", "cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id", "medicamento_id"),
  FOREIGN KEY ("cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id") REFERENCES "citas" ("cita_id", "doctor_id", "paciente_id", "departamento_id", "sede_id") ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("historia_id") REFERENCES "historias_clinicas" ("historia_id") ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY ("medicamento_id") REFERENCES "medicamentos" ("medicamento_id") ON DELETE CASCADE ON UPDATE CASCADE
);


-- ============================================
-- SCRIPT DE INSERCIÓN DE DATOS - HOSPITAL SAN LUCAS
-- TODAS LAS FECHAS EN 2025
-- ============================================

-- 1. ROLES (Mismos roles)
INSERT INTO rol (id_rol, nombre_rol) VALUES
(1, 'doctor'),
(2, 'paciente'),
(3, 'administrador_sistema'),
(4, 'administrador_datos'),
(5, 'tecnico'),
(6, 'secretaria');

-- 2. SEDES (2 nuevas sedes)
INSERT INTO sede (sede_id, nombre, direccion, telefono, tipo_sede) VALUES
(1, 'Hospital San Lucas Central', 'Av. San Martín #456, Cali', '6023456789', 'Hospital'),
(2, 'Hospital San Lucas Norte', 'Carrera 25 #100-45, Cali', '6023451234', 'Hospital');

-- 3. DEPARTAMENTOS (Mismos departamentos que el original)
INSERT INTO departamento (departamento_id, sede_id, nombre, descripcion) VALUES
(1, 1, 'Cardiología', 'Departamento especializado en enfermedades cardiovasculares'),
(2, 1, 'Traumatología', 'Atención de lesiones y enfermedades del sistema músculo-esquelético'),
(3, 1, 'Medicina General', 'Consulta y atención médica general'),
(1, 2, 'Cardiología', 'Departamento especializado en enfermedades cardiovasculares'),
(4,2, 'Administrativo', 'Departamento gestos del hospital'),
(5, 2, 'Pediatría', 'Atención médica especializada para niños y adolescentes'),
(3, 2, 'Medicina General', 'Consulta y atención médica general');


-- 4. PERSONAS (14 personas nuevas)
INSERT INTO persona (persona_id, tipo_documento, nombres, apellidos, fecha_nacimiento, sexo, direccion, telefono, email) VALUES
-- Doctores (3)
(3001, 'CC', 'Miguel Ángel', 'Santos Rodríguez', '1976-05-18', 'M', 'Calle 100 #25-40', '3102223344', 'miguel.santos@sanlucas.com'),
(3002, 'CC', 'Patricia Elena', 'Gómez Vargas', '1981-08-22', 'F', 'Carrera 40 #55-30', '3105556677', 'patricia.gomez@sanlucas.com'),
(3003, 'CC', 'Ricardo Andrés', 'Fernández Castro', '1984-11-30', 'M', 'Av. 6N #23-45', '3158889900', 'ricardo.fernandez@sanlucas.com'),

-- Técnicos (3)
(3004, 'CC', 'Sandra Milena', 'Ortega Jiménez', '1992-02-14', 'F', 'Calle 80 #15-22', '3182223333', 'sandra.ortega@sanlucas.com'),
(3005, 'CC', 'Javier Alejandro', 'Ramírez López', '1990-06-25', 'M', 'Carrera 30 #12-18', '3144445555', 'javier.ramirez@sanlucas.com'),
(3006, 'CC', 'Lucía Marcela', 'Castaño Ruiz', '1993-03-08', 'F', 'Av. Colombia #45-60', '3196667777', 'lucia.castano@sanlucas.com'),

-- Pacientes solo-pacientes (5)
(3007, 'CC', 'Gustavo Adolfo', 'Molina Restrepo', '1973-09-12', 'M', 'Calle 50 #18-35', '3208889999', 'gustavo.molina@email.com'),
(3008, 'CC', 'Verónica Alejandra', 'Suárez Pineda', '1979-12-05', 'F', 'Carrera 15 #40-25', '3110001111', 'veronica.suarez@email.com'),
(3009, 'CC', 'Óscar David', 'Ríos Mendoza', '1969-07-18', 'M', 'Av. Las Américas #22-80', '3122223333', 'oscar.rios@email.com'),
(3010, 'CC', 'Catalina María', 'Torres Silva', '1997-04-20', 'F', 'Calle 66 #28-12', '3134445555', 'catalina.torres@email.com'),
(3011, 'CC', 'Felipe Antonio', 'Peña Cárdenas', '1974-11-28', 'M', 'Carrera 70 #33-10', '3146667777', 'felipe.pena@email.com'),

-- Administrador Sistema (1)
(3012, 'CC', 'Diego Fernando', 'Álvarez Mora', '1986-03-15', 'M', 'Av. Roosevelt #40-15', '3158889999', 'diego.alvarez@sanlucas.com'),

-- Administrador Datos (1)
(3013, 'CC', 'Paola Andrea', 'Vega Guzmán', '1991-05-22', 'F', 'Calle 120 #18-30', '3160001111', 'paola.vega@sanlucas.com'),

-- Secretaria (1)
(3014, 'CC', 'Laura Valentina', 'Herrera Soto', '1994-10-08', 'F', 'Carrera 50 #65-40', '3172223333', 'laura.herrera@sanlucas.com');

-- 5. ROL_PERSONA (Asignación de roles)
INSERT INTO rol_persona (id_rol, persona_id) VALUES
-- Doctores
(1, 3001),
(1, 3002),
(1, 3003),

-- Técnicos
(5, 3004),
(5, 3005),
(5, 3006),

-- Pacientes (7 totales, incluyendo 2 empleados como pacientes)
(2, 3003), -- Ricardo (Doctor y Paciente)
(2, 3006), -- Lucía (Técnico y Paciente)
(2, 3007),
(2, 3008),
(2, 3009),
(2, 3010),
(2, 3011),

-- Otros roles
(3, 3012),
(4, 3013),
(6, 3014);

-- 6. PACIENTES (7 pacientes)
INSERT INTO paciente (paciente_id, persona_id, tipo_sangre, contacto_emergencia, riesgo_clinico) VALUES
(4001, 3003, 'A+', '3011234567', 'Bajo'),
(4002, 3006, 'O+', '3012345678', 'Bajo'),
(4003, 3007, 'B+', '3013456789', 'Alto'),
(4004, 3008, 'AB+', '3014567890', 'Medio'),
(4005, 3009, 'O-', '3015678901', 'Alto'),
(4006, 3010, 'A-', '3016789012', 'Bajo'),
(4007, 3011, 'B-', '3017890123', 'Medio');

-- 7. EMPLEADOS (9 empleados)
INSERT INTO empleado (empleado_id, persona_id, departamento_id, sede_id, fecha_contratacion, salario) VALUES
-- Doctores
(5001, 3001, 1, 1, '2015-01-15', 15500000.00), -- Cardiología Sede 1
(5002, 3002, 2, 1, '2016-05-20', 15000000.00), -- Traumatología Sede 1
(5003, 3003, 5, 2, '2018-02-10', 14000000.00), -- Pediatría Sede 2

-- Técnicos
(5004, 3004, 1, 1, '2019-03-05', 4700000.00),  -- Cardiología Sede 1
(5005, 3005, 3, 1, '2020-08-12', 4400000.00),  -- Medicina General Sede 1
(5006, 3006, 1, 2, '2021-06-18', 4500000.00),  -- Cardiología Sede 2

-- Otros roles
(5007, 3012, 4, 2, '2014-02-10', 8200000.00),  -- Admin Sistema
(5008, 3013, 4, 2, '2017-10-05', 7800000.00),  -- Admin Datos
(5009, 3014, 4, 2, '2020-12-01', 3700000.00);  -- Secretaria

-- 8. DOCTORES (3 doctores)
INSERT INTO doctor (doctor_id, empleado_id, especialidad) VALUES
(6001, 5001, 'Cardiología'),
(6002, 5002, 'Traumatología'),
(6003, 5003, 'Pediatría');

-- 9. TÉCNICOS (3 técnicos)
INSERT INTO tecnico (tecnico_id, empleado_id, area) VALUES
(7001, 5004, 'Laboratorio de Cardiología'),
(7002, 5005, 'Radiología y Ecografía'),
(7003, 5006, 'Mantenimiento de Equipos Cardíacos');

-- 10. EQUIPAMIENTO (12 equipos nuevos)
INSERT INTO equipamiento (equipamiento_id, nombre, categoria, estado) VALUES
-- Cardiología Sede 1 (Dept 1)
(8001, 'Electrocardiógrafo Digital 12 Canales', 'Diagnóstico', 'Activo'),
(8002, 'Holter de 72 Horas', 'Monitoreo', 'Activo'),

-- Traumatología Sede 1 (Dept 2)
(8003, 'Tomógrafo Multislice', 'Imagenología', 'Activo'),
(8004, 'Mesa Quirúrgica Ortopédica Eléctrica', 'Quirúrgico', 'Activo'),

-- Medicina General Sede 1 (Dept 3)
(8005, 'Monitor Multiparamétrico', 'Diagnóstico', 'Activo'),
(8006, 'Desfibrilador Manual', 'Emergencia', 'Activo'),

-- Cardiología Sede 2 (Dept 4)
(8007, 'Ecocardiógrafo Doppler Color', 'Diagnóstico', 'Activo'),
(8008, 'MAPA (Monitor Ambulatorio de Presión Arterial)', 'Monitoreo', 'Activo'),

-- Pediatría Sede 2 (Dept 5)
(8009, 'Monitor Neonatal Avanzado', 'Cuidado Intensivo', 'Activo'),
(8010, 'Respirador Pediátrico', 'Terapia', 'Activo'),

-- Medicina General Sede 2 (Dept 6)
(8011, 'Electrocardiógrafo Portátil', 'Diagnóstico', 'Activo'),
(8012, 'Nebulizador de Alta Frecuencia', 'Tratamiento', 'Activo');

-- 11. COMPARTE (Equipos compartidos entre departamentos - CUIDADO CON IDs)
INSERT INTO comparte (equipamiento_id, departamento_id, sede_id) VALUES
-- Sede 1
(8001, 1, 1), (8002, 1, 1),
(8003, 2, 1), (8004, 2, 1),
(8005, 3, 1), (8006, 3, 1),

-- Sede 2
(8007, 1, 2), (8008, 1, 2),
(8009, 5, 2), (8010, 5, 2),
(8011, 3, 2), (8012, 3, 2),

-- Equipos compartidos entre sedes (2 equipos compartidos)
-- Holter compartido entre Cardiología de ambas sedes
(8002, 1, 2),

-- Tomógrafo compartido con Medicina General Sede 1
(8003, 3, 1);

-- 12. MANTENIMIENTO (Registros de mantenimiento en 2025)
INSERT INTO mantenimiento (equipamiento_id, fecha_mantenimiento, tipo_mantenimiento, tecnico_id) VALUES
(8001, '2025-10-10', 'Preventivo', 7001),
(8002, '2025-09-15', 'Calibración', 7001),
(8003, '2025-11-20', 'Correctivo', 7002),
(8004, '2025-10-30', 'Preventivo', 7003),
(8007, '2025-11-25', 'Preventivo', 7003),
(8008, '2025-09-28', 'Revisión de emergencia', 7003);

-- 13. HISTORIAS CLÍNICAS (Ejemplos para 3 citas adicionales)

INSERT INTO historias_clinicas (historia_id, fecha_registro, diagnostico, tratamiento, paciente_id) VALUES
-- Historias para las 3 CITAS ADICIONALES (rango julio 24 - diciembre 12, 2025)
(9001, '2025-08-15 10:30:00', 'Hipertensión arterial controlada', 'Ajuste de medicación antihipertensiva', 4003),
(9002, '2025-09-22 14:45:00', 'Fractura de radio distal', 'Inmovilización con yeso por 6 semanas', 4004),
(9003, '2025-10-30 11:15:00', 'Infección urinaria no complicada', 'Antibioticoterapia por 7 días', 4005),
-- Historias existentes actualizadas a 2025
(9004, '2025-06-05 09:45:00', 'Control pediátrico rutinario', 'Vacunación al día', 4001),
(9005, '2025-07-10 11:20:00', 'Infección respiratoria aguda', 'Amoxicilina 500mg cada 8h x 7 días', 4001),
(9006, '2025-06-08 08:30:00', 'Arritmia cardíaca controlada', 'Continuar con betabloqueador', 4002),
(9007, '2025-07-12 14:15:00', 'Seguimiento cardiológico', 'ECG normal, mantener tratamiento', 4002),
(9008, '2025-06-12 10:00:00', 'Hipertensión arterial grado 2', 'Enalapril 10mg cada 12h', 4003);

-- 14. CITAS COMPLETADAS (antes del 12 dic 2025) - Incluyendo 3 citas adicionales

INSERT INTO citas (cita_id, paciente_id, departamento_id, sede_id, doctor_id, fecha_hora, estado, tipo_servicio) VALUES
-- CITAS ADICIONALES 1-3 (rango julio 24 - diciembre 12, 2025)
(10001, 4003, 1, 1, 6001, '2025-08-15 10:00:00', 'Completada', 'Control Cardiológico'),
(10002, 4004, 2, 1, 6002, '2025-09-22 14:30:00', 'Completada', 'Consulta Traumatológica'),
(10003, 4005, 1, 1, 6001, '2025-10-30 11:00:00', 'Completada', 'Consulta Cardiológica'),

-- CITAS EXISTENTES (actualizadas a 2025, antes del 12 dic)
(10004, 4001, 5, 2, 6003, '2025-06-05 09:00:00', 'Completada', 'Consulta General'),
(10005, 4001, 5, 2, 6003, '2025-07-10 10:30:00', 'Completada', 'Control'),
(10006, 4002, 1, 2, 6001, '2025-06-08 08:00:00', 'Completada', 'Consulta Cardiológica'),
(10007, 4002, 1, 2, 6001, '2025-07-12 14:00:00', 'Completada', 'Seguimiento'),
(10008, 4003, 1, 1, 6001, '2025-06-12 09:30:00', 'Completada', 'Consulta Cardiológica'),

-- MÁS CITAS COMPLETADAS PARA LLENAR (ejemplos)
(10009, 4006, 5, 2, 6003, '2025-08-10 09:00:00', 'Completada', 'Consulta Pediátrica'),
(10010, 4007, 2, 1, 6002, '2025-09-05 11:00:00', 'Completada', 'Control Traumatológico'),
(10011, 4001, 5, 2, 6003, '2025-10-15 08:30:00', 'Completada', 'Seguimiento'),
(10012, 4003, 1, 1, 6001, '2025-11-20 10:00:00', 'Completada', 'Control Cardiológico');

-- 15. CITAS PROGRAMADAS (a partir del 12 dic 2025)
INSERT INTO citas (cita_id, paciente_id, departamento_id, sede_id, doctor_id, fecha_hora, estado, tipo_servicio) VALUES
(20001, 4004, 2, 1, 6002, '2025-12-15 10:00:00', 'Programada', 'Control Traumatológico'),
(20002, 4005, 1, 1, 6001, '2025-12-18 14:30:00', 'Programada', 'Consulta Cardiológica'),
(20003, 4006, 5, 2, 6003, '2025-12-20 09:30:00', 'Programada', 'Consulta Pediátrica'),
(20004, 4007, 2, 1, 6002, '2025-12-22 11:00:00', 'Programada', 'Seguimiento Traumatológico'),
(20005, 4001, 5, 2, 6003, '2025-12-28 08:45:00', 'Programada', 'Control Pediátrico'),
(20006, 4002, 1, 2, 6001, '2025-12-30 13:15:00', 'Programada', 'Seguimiento Cardiológico');

-- 16. MEDICAMENTOS (Por departamento - nombres diferentes)
INSERT INTO medicamentos (medicamento_id, departamento_id, sede_id, nombre, descripcion, stock, proveedor) VALUES
-- Cardiología Sede 1 (Dept 1)
(11001, 1, 1, 'Atorvastatina 80mg', 'Estatina de alta potencia', 450, 'FarmaMed'),
(11002, 1, 1, 'Losartán 100mg', 'Antihipertensivo ARA II', 500, 'MediTech'),
(11003, 1, 1, 'Clopidogrel 75mg', 'Antiagregante plaquetario', 600, 'BioFarma'),
(11004, 1, 1, 'Bisoprolol 5mg', 'Betabloqueador selectivo', 350, 'FarmaMed'),

-- Traumatología Sede 1 (Dept 2)
(11005, 2, 1, 'Naproxeno 500mg', 'Antiinflamatorio no esteroideo', 550, 'MediTech'),
(11006, 2, 1, 'Paracetamol 1g', 'Analgésico y antipirético', 800, 'BioFarma'),
(11007, 2, 1, 'Ketorolaco 10mg', 'Antiinflamatorio inyectable', 300, 'FarmaMed'),
(11008, 2, 1, 'Codeína 30mg', 'Analgésico opioide', 200, 'MediTech'),

-- Medicina General Sede 1 (Dept 3)
(11009, 3, 1, 'Amoxicilina/Ácido Clavulánico 1g', 'Antibiótico de amplio espectro', 400, 'BioFarma'),
(11010, 3, 1, 'Pantoprazol 40mg', 'Inhibidor de bomba de protones', 600, 'FarmaMed'),
(11011, 3, 1, 'Metformina 1g', 'Hipoglucemiante oral', 550, 'MediTech'),
(11012, 3, 1, 'Simvastatina 40mg', 'Estatina para control de lípidos', 480, 'BioFarma'),

-- Cardiología Sede 2 (Dept 4)
(11013, 1, 2, 'Atorvastatina 80mg', 'Estatina de alta potencia', 420, 'FarmaMed'),
(11014, 1, 2, 'Carvedilol 6.25mg', 'Betabloqueador', 380, 'MediTech'),
(11015, 1, 2, 'Aspirina 100mg', 'Antiagregante plaquetario', 700, 'BioFarma'),
(11016, 1, 2, 'Espironolactona 25mg', 'Diurético ahorrador de potasio', 320, 'FarmaMed'),

-- Pediatría Sede 2 (Dept 5)
(11017, 5, 2, 'Amoxicilina Suspensión 250mg/5ml', 'Antibiótico pediátrico', 300, 'MediTech'),
(11018, 5, 2, 'Ibuprofeno Suspensión 100mg/5ml', 'Antinflamatorio pediátrico', 400, 'BioFarma'),
(11019, 5, 2, 'Salbutamol Inhalador 100mcg', 'Broncodilatador', 250, 'FarmaMed'),
(11020, 5, 2, 'Loratadina Jarabe 5mg/5ml', 'Antihistamínico', 350, 'MediTech'),

-- Medicina General Sede 2 (Dept 6)
(11021, 3, 2, 'Azitromicina 500mg', 'Antibiótico macrólido', 350, 'BioFarma'),
(11022, 3, 2, 'Ranitidina 300mg', 'Antagonista H2', 450, 'FarmaMed'),
(11023, 3, 2, 'Enalapril 10mg', 'Antihipertensivo IECA', 400, 'MediTech'),
(11024, 3, 2, 'Gliclazida 80mg', 'Hipoglucemiante oral', 280, 'BioFarma');




INSERT INTO prescripciones (prescripcion_id, medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
-- Para CITA ADICIONAL 1 (10001 - Historia 9001) - Doctor 6001
(12001, 11001, 9001, 10001, 4003, 6001, 1, 1, '80mg', 'Cada 24 horas', '30 días', '2025-08-15'),
(12002, 11002, 9001, 10001, 4003, 6001, 1, 1, '100mg', 'Cada 12 horas', '30 días', '2025-08-15'),

-- Para CITA ADICIONAL 2 (10002 - Historia 9002) - Doctor 6002
(12003, 11005, 9002, 10002, 4004, 6002, 1, 2, '500mg', 'Cada 8 horas', '10 días', '2025-09-22'),
(12004, 11006, 9002, 10002, 4004, 6002, 1, 2, '1g', 'Cada 6 horas', '7 días', '2025-09-22'),

-- Para CITA ADICIONAL 3 (10003 - Historia 9003) - Doctor 6001
(12005, 11009, 9003, 10003, 4005, 6001, 1, 1, '1g', 'Cada 8 horas', '7 días', '2025-10-30'),
(12006, 11010, 9003, 10003, 4005, 6001, 1, 1, '40mg', 'Cada 24 horas', '14 días', '2025-10-30'),

-- Prescripciones existentes (actualizadas a 2025)
(12007, 11017, 9004, 10004, 4001, 6003, 2, 5, '5ml', 'Cada 8 horas', '7 días', '2025-06-05'),
(12008, 11018, 9004, 10004, 4001, 6003, 2, 5, '2.5ml', 'Cada 6 horas', '3 días', '2025-06-05'),
(12009, 11013, 9006, 10006, 4002, 6001, 2, 1, '80mg', 'Cada 24 horas', '30 días', '2025-06-08'),
(12010, 11014, 9006, 10006, 4002, 6001, 2, 1, '6.25mg', 'Cada 12 horas', '30 días', '2025-06-08'),
(12011, 11001,	9008, 10008, 4003, 6001, 1, 1, '80mg', 'Cada 24 horas', '30 días', '2025-06-12'),
(12012, 11002, 9008, 10008, 4003, 6001, 1, 1, '100mg', 'Cada 12 horas', '30 días', '2025-06-12');

-- 18. AUDITORÍA DE ACCESOS (Ejemplos en 2025)
INSERT INTO auditoria_accesos (evento_id, accion, tabla_modificada, ip_origen, fecha_evento, persona_id) VALUES
(13001, 'INSERT', 'citas', '192.168.2.100', '2025-08-15 09:15:00', 3014),
(13002, 'UPDATE', 'paciente', '192.168.2.105', '2025-09-22 10:45:00', 3012),
(13003, 'SELECT', 'historias_clinicas', '192.168.2.102', '2025-10-30 11:30:00', 3001),
(13004, 'INSERT', 'prescripciones', '192.168.2.103', '2025-11-20 14:20:00', 3002),
(13005, 'UPDATE', 'medicamentos', '192.168.2.100', '2025-12-01 15:10:00', 3013),
(13006, 'SELECT', 'citas', '192.168.2.104', '2025-12-05 16:00:00', 3003);

-- ============================================
-- FIN DEL SCRIPT
-- ============================================

-- ============================================
-- CITAS COMPLETADAS ENTRE 12 NOV Y 12 DIC 2025
-- Con historias clínicas y prescripciones correspondientes
-- ============================================

-- NUEVAS CITAS COMPLETADAS (12 nov - 12 dic 2025)
INSERT INTO citas (cita_id, paciente_id, departamento_id, sede_id, doctor_id, fecha_hora, estado, tipo_servicio) VALUES
-- Doctor 6001 (Cardiología) - 8 citas
(10013, 4003, 1, 1, 6001, '2025-11-12 09:00:00', 'Completada', 'Control Cardiológico'),
(10014, 4002, 1, 2, 6001, '2025-11-14 10:30:00', 'Completada', 'Seguimiento Cardiológico'),
(10015, 4005, 1, 1, 6001, '2025-11-18 14:00:00', 'Completada', 'Consulta Cardiológica'),
(10016, 4003, 1, 1, 6001, '2025-11-22 08:30:00', 'Completada', 'Control Cardiológico'),
(10017, 4002, 1, 2, 6001, '2025-11-26 11:00:00', 'Completada', 'Consulta Cardiológica'),
(10018, 4005, 1, 1, 6001, '2025-11-29 15:30:00', 'Completada', 'Seguimiento Cardiológico'),
(10019, 4003, 1, 1, 6001, '2025-12-03 09:30:00', 'Completada', 'Control Cardiológico'),
(10020, 4002, 1, 2, 6001, '2025-12-08 13:00:00', 'Completada', 'Consulta Cardiológica'),

-- Doctor 6002 (Traumatología) - 6 citas
(10021, 4004, 2, 1, 6002, '2025-11-13 10:00:00', 'Completada', 'Control Traumatológico'),
(10022, 4007, 2, 1, 6002, '2025-11-19 14:30:00', 'Completada', 'Consulta Traumatológica'),
(10023, 4004, 2, 1, 6002, '2025-11-25 09:00:00', 'Completada', 'Seguimiento Traumatológico'),
(10024, 4007, 2, 1, 6002, '2025-12-02 11:30:00', 'Completada', 'Control Traumatológico'),
(10025, 4004, 2, 1, 6002, '2025-12-06 15:00:00', 'Completada', 'Consulta Traumatológica'),
(10026, 4007, 2, 1, 6002, '2025-12-10 10:30:00', 'Completada', 'Seguimiento Traumatológico'),

-- Doctor 6003 (Pediatría) - 5 citas
(10027, 4001, 5, 2, 6003, '2025-11-15 08:30:00', 'Completada', 'Control Pediátrico'),
(10028, 4006, 5, 2, 6003, '2025-11-21 10:00:00', 'Completada', 'Consulta Pediátrica'),
(10029, 4001, 5, 2, 6003, '2025-11-28 14:00:00', 'Completada', 'Seguimiento Pediátrico'),
(10030, 4006, 5, 2, 6003, '2025-12-04 09:00:00', 'Completada', 'Control Pediátrico'),
(10031, 4001, 5, 2, 6003, '2025-12-11 11:30:00', 'Completada', 'Consulta Pediátrica');

-- ============================================
-- HISTORIAS CLÍNICAS CORRESPONDIENTES
-- (Fecha registro = fecha_cita + 30-45 minutos)
-- ============================================

INSERT INTO historias_clinicas (historia_id, fecha_registro, diagnostico, tratamiento, paciente_id) VALUES
-- Historias para Doctor 6001 (Cardiología)
(9009, '2025-11-12 09:35:00', 'Hipertensión arterial estable', 'Continuar tratamiento antihipertensivo', 4003),
(9010, '2025-11-14 11:10:00', 'Arritmia sinusal controlada', 'Mantener betabloqueador', 4002),
(9011, '2025-11-18 14:40:00', 'Cardiopatía isquémica estable', 'Ajuste de estatinas', 4005),
(9012, '2025-11-22 09:15:00', 'Control de hipertensión arterial', 'Continuar con losartán', 4003),
(9013, '2025-11-26 11:45:00', 'Insuficiencia cardíaca compensada', 'Agregar diurético', 4002),
(9014, '2025-11-29 16:10:00', 'Dislipidemia mixta', 'Estatina de alta potencia', 4005),
(9015, '2025-12-03 10:15:00', 'Hipertensión arterial grado 1', 'Ajuste de dosis de losartán', 4003),
(9016, '2025-12-08 13:40:00', 'Fibrilación auricular paroxística', 'Anticoagulación oral', 4002),

-- Historias para Doctor 6002 (Traumatología)
(9017, '2025-11-13 10:40:00', 'Retiro de yeso por consolidación ósea', 'Fisioterapia por 4 semanas', 4004),
(9018, '2025-11-19 15:10:00', 'Lumbalgia mecánica aguda', 'Relajante muscular y analgesia', 4007),
(9019, '2025-11-25 09:45:00', 'Seguimiento de fractura consolidada', 'Continuar rehabilitación', 4004),
(9020, '2025-12-02 12:10:00', 'Tendinitis de hombro derecho', 'Antiinflamatorios y reposo', 4007),
(9021, '2025-12-06 15:35:00', 'Esguince de tobillo grado II', 'Inmovilización parcial', 4004),
(9022, '2025-12-10 11:15:00', 'Control de tendinitis en mejoría', 'Reducir antiinflamatorio', 4007),

-- Historias para Doctor 6003 (Pediatría)
(9023, '2025-11-15 09:10:00', 'Faringoamigdalitis aguda', 'Antibioticoterapia oral', 4001),
(9024, '2025-11-21 10:40:00', 'Control de crecimiento y desarrollo normal', 'Seguimiento en 3 meses', 4006),
(9025, '2025-11-28 14:45:00', 'Otitis media aguda', 'Amoxicilina por 10 días', 4001),
(9026, '2025-12-04 09:35:00', 'Bronquitis aguda', 'Nebulizaciones y broncodilatador', 4006),
(9027, '2025-12-11 12:10:00', 'Gastroenteritis aguda leve', 'Hidratación oral y probióticos', 4001);

-- ============================================
-- PRESCRIPCIONES CORRESPONDIENTES
-- ============================================

INSERT INTO prescripciones (prescripcion_id, medicamento_id, historia_id, cita_id, paciente_id, doctor_id, sede_id, departamento_id, dosis, frecuencia, duracion, fecha_emision) VALUES
-- Prescripciones Doctor 6001 (Cardiología)
-- Cita 10013 - Historia 9009
(12013, 11002, 9009, 10013, 4003, 6001, 1, 1, '100mg', 'Cada 12 horas', '30 días', '2025-11-12'),
(12014, 11004, 9009, 10013, 4003, 6001, 1, 1, '5mg', 'Cada 24 horas', '30 días', '2025-11-12'),

-- Cita 10014 - Historia 9010
(12015, 11014, 9010, 10014, 4002, 6001, 2, 1, '6.25mg', 'Cada 12 horas', '30 días', '2025-11-14'),
(12016, 11015, 9010, 10014, 4002, 6001, 2, 1, '100mg', 'Cada 24 horas', '30 días', '2025-11-14'),

-- Cita 10015 - Historia 9011
(12017, 11001, 9011, 10015, 4005, 6001, 1, 1, '80mg', 'Cada 24 horas', '30 días', '2025-11-18'),
(12018, 11003, 9011, 10015, 4005, 6001, 1, 1, '75mg', 'Cada 24 horas', '30 días', '2025-11-18'),

-- Cita 10016 - Historia 9012
(12019, 11002, 9012, 10016, 4003, 6001, 1, 1, '100mg', 'Cada 12 horas', '30 días', '2025-11-22'),

-- Cita 10017 - Historia 9013
(12020, 11016, 9013, 10017, 4002, 6001, 2, 1, '25mg', 'Cada 24 horas', '30 días', '2025-11-26'),
(12021, 11014, 9013, 10017, 4002, 6001, 2, 1, '6.25mg', 'Cada 12 horas', '30 días', '2025-11-26'),

-- Cita 10018 - Historia 9014
(12022, 11001, 9014, 10018, 4005, 6001, 1, 1, '80mg', 'Cada 24 horas', '30 días', '2025-11-29'),

-- Cita 10019 - Historia 9015
(12023, 11002, 9015, 10019, 4003, 6001, 1, 1, '150mg', 'Cada 12 horas', '30 días', '2025-12-03'),
(12024, 11004, 9015, 10019, 4003, 6001, 1, 1, '5mg', 'Cada 24 horas', '30 días', '2025-12-03'),

-- Cita 10020 - Historia 9016
(12025, 11014, 9016, 10020, 4002, 6001, 2, 1, '12.5mg', 'Cada 12 horas', '30 días', '2025-12-08'),
(12026, 11015, 9016, 10020, 4002, 6001, 2, 1, '100mg', 'Cada 24 horas', '30 días', '2025-12-08'),

-- Prescripciones Doctor 6002 (Traumatología)
-- Cita 10021 - Historia 9017 (Retiro de yeso)
(12027, 11006, 9017, 10021, 4004, 6002, 1, 2, '1g', 'Cada 8 horas', '5 días', '2025-11-13'),
(12028, 11005, 9017, 10021, 4004, 6002, 1, 2, '500mg', 'Cada 12 horas', '5 días', '2025-11-13'),

-- Cita 10022 - Historia 9018 (Lumbalgia)
(12029, 11005, 9018, 10022, 4007, 6002, 1, 2, '500mg', 'Cada 12 horas', '7 días', '2025-11-19'),
(12030, 11008, 9018, 10022, 4007, 6002, 1, 2, '30mg', 'Cada 8 horas', '5 días', '2025-11-19'),
(12031, 11006, 9018, 10022, 4007, 6002, 1, 2, '1g', 'Cada 6 horas', '7 días', '2025-11-19'),

-- Cita 10023 - Historia 9019 (Seguimiento)
(12032, 11006, 9019, 10023, 4004, 6002, 1, 2, '1g', 'Cada 6 horas', '3 días', '2025-11-25'),
(12033, 11005, 9019, 10023, 4004, 6002, 1, 2, '500mg', 'Cada 8 horas', '5 días', '2025-11-25'),

-- Cita 10024 - Historia 9020 (Tendinitis)
(12034, 11005, 9020, 10024, 4007, 6002, 1, 2, '500mg', 'Cada 12 horas', '10 días', '2025-12-02'),
(12035, 11007, 9020, 10024, 4007, 6002, 1, 2, '10mg', 'Cada 8 horas', '3 días', '2025-12-02'),
(12036, 11006, 9020, 10024, 4007, 6002, 1, 2, '1g', 'Cada 8 horas', '5 días', '2025-12-02'),

-- Cita 10025 - Historia 9021 (Esguince)
(12037, 11005, 9021, 10025, 4004, 6002, 1, 2, '500mg', 'Cada 8 horas', '7 días', '2025-12-06'),
(12038, 11006, 9021, 10025, 4004, 6002, 1, 2, '1g', 'Cada 6 horas', '5 días', '2025-12-06'),
(12039, 11007, 9021, 10025, 4004, 6002, 1, 2, '10mg', 'Cada 12 horas', '5 días', '2025-12-06'),

-- Cita 10026 - Historia 9022 (Control tendinitis)
(12040, 11005, 9022, 10026, 4007, 6002, 1, 2, '500mg', 'Cada 12 horas', '5 días', '2025-12-10'),
(12041, 11006, 9022, 10026, 4007, 6002, 1, 2, '1g', 'Cada 8 horas', '3 días', '2025-12-10'),

-- Prescripciones Doctor 6003 (Pediatría)
-- Cita 10027 - Historia 9023 (Faringoamigdalitis)
(12042, 11017, 9023, 10027, 4001, 6003, 2, 5, '5ml', 'Cada 8 horas', '10 días', '2025-11-15'),
(12043, 11018, 9023, 10027, 4001, 6003, 2, 5, '5ml', 'Cada 8 horas', '5 días', '2025-11-15'),
(12044, 11020, 9023, 10027, 4001, 6003, 2, 5, '5ml', 'Cada 24 horas', '5 días', '2025-11-15'),

-- Cita 10028 - Historia 9024 (Control normal)
(12045, 11020, 9024, 10028, 4006, 6003, 2, 5, '5ml', 'Cada 24 horas', '7 días', '2025-11-21'),

-- Cita 10029 - Historia 9025 (Otitis)
(12046, 11017, 9025, 10029, 4001, 6003, 2, 5, '5ml', 'Cada 8 horas', '10 días', '2025-11-28'),
(12047, 11018, 9025, 10029, 4001, 6003, 2, 5, '5ml', 'Cada 6 horas', '3 días', '2025-11-28'),
(12048, 11020, 9025, 10029, 4001, 6003, 2, 5, '5ml', 'Cada 12 horas', '7 días', '2025-11-28'),

-- Cita 10030 - Historia 9026 (Bronquitis)
(12049, 11019, 9026, 10030, 4006, 6003, 2, 5, '2 puffs', 'Cada 6 horas', '7 días', '2025-12-04'),
(12050, 11018, 9026, 10030, 4006, 6003, 2, 5, '5ml', 'Cada 8 horas', '5 días', '2025-12-04'),
(12051, 11017, 9026, 10030, 4006, 6003, 2, 5, '5ml', 'Cada 8 horas', '7 días', '2025-12-04'),

-- Cita 10031 - Historia 9027 (Gastroenteritis)
(12052, 11020, 9027, 10031, 4001, 6003, 2, 5, '5ml', 'Cada 12 horas', '5 días', '2025-12-11'),
(12053, 11018, 9027, 10031, 4001, 6003, 2, 5, '5ml', 'Cada 8 horas', '3 días', '2025-12-11');

-- ============================================
-- RESUMEN DE CITAS POR DOCTOR (12 NOV - 12 DIC)
-- Doctor 6001 (Cardiología): 8 citas
-- Doctor 6002 (Traumatología): 6 citas
-- Doctor 6003 (Pediatría): 5 citas
-- ============================================